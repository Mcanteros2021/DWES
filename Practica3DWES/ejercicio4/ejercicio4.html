<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="ejercicio4.css">
    <title>Document</title>
</head>

<body>
    
    <h1>Formularios, Validaciones</h1>
    <form id="Ej4" action=""></form>
    <h2>Registro</h2>
    <div class="columna">

        <label for="creacion"><strong>Fecha de creacion :</strong><input type="date" id="creacion"></label>
        
        <label for="cocinero"><strong>Cocinero :</strong><input type="text" id="cocinero"></label>
        
        <label for="destinatario"><strong>Destinatario :</strong><input type="text" id="destinatario"></label>
        
        <label for="gramos"><strong>Gramos :</strong><input type="number" min="100" max="5000"  id="gramos"></label>
       
        <label for="composición"><strong>Composición :</strong> <input type="text" id="composicion"></label>

        <label for="cuenta"><strong>Número de cuenta bancaria :</strong> <input type="text" id="cuenta"></label>
       
        <button type='submit' onclick="regist()">Enviar</button>
    </form>
    </div>
    <script>

        function regist(){

            const $FORM = document.getElementById('Ej4')
            const $creacion = document.getElementById("creacion")
            const $cocinero = document.getElementById("cocinero")
            const $destinatario  = document.getElementById("destinatario")
            const $gramos = document.getElementById("gramos")
            const $composicion = document.getElementById("composicion")
            const $cuenta = document.getElementById("cuenta")
            

            const creacion = $creacion.value
            const cocinero = $cocinero.value
            const destinatario = $destinatario.value
            const gramos = $gramos.value
            const composicion = $composicion.value
            const cuenta = $cuenta.value
           
            function isValidCreacion(creacion){
                    const validacion =/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/;
                    return validacion.test(creacion)
                }
                function isValidCocinero(cocinero){
                    const validacion = /^[A-Z]{2}\W{1}\d{4}$/;
                    return validacion.test(cocinero)
                }
                function isValidDestinatario(destinatario){
                    const validacion = /^[A-Z]{2,3}_[a-z]+:\d{4}$/
                    return validacion.test(destinatario)
                }
                
                function isValidComposicion(composicion,gramos){
                    const validacion = gramos + /^g[A-Z]{1,2}\d*?[A-Z]{1,2}\d*?$/i
                    return validacion.test(composicion)
                }
                function isValidCuenta(cuenta){
                    const validacion = /^[A-Za-z]{2}-\d-$/;
                    return validacion.test(cuenta)
                }
            

    
                if(creacion == false|| isValidCreacion(creacion) == false){
                    alert("La fecha de la creacion no debe estar vacia y tiene que ser válida")
                }
                if(cocinero == false|| isValidCocinero(cocinero) == false){
                    alert("El cocinero no debe estar vacío y tiene que ser válido")
                }
                if(destinatario == false|| isValidDestinatario(destinatario) == false){
                    alert("El destinatario no debe estar vacío y tiene que ser válido")
                }
                if(gramos == false){
                    alert("Los gramos no deben estar vacío")
                }
                if(composicion == false|| isValidComposicion(composicion) == false){
                    alert("La composición no debe estar vacío y tiene que ser válido")
                }
                if(cuenta == false|| isValidCuenta(cuenta) == false){
                    alert("No se valida")
                }
    
                var regUsuario = {DNI: DNI ,nombre:name, Fecha:date, Email:email, web : web, pass: pass};
                console.log(regUsuario);
                var newUser = JSON.stringify(regUsuario);
                console.log(newUser);
    
            
        }
    
    </script>
</body>
</html>