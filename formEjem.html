<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Formulario, validaciones</title>
<link rel="stylesheet" href="formularios.css">
</head>
<body>
<h1>Formularios, Validaciones</h1>
<form id="Ej1" action="">
<fieldset>
<legend>
<h2>Registro</h2>
</legend>
<div class="Ej1">
<label for="nombre"><strong>Nombre</strong></label>
<input type="text" id="nombre">
<label for="apellido"><strong>Apellido</strong></label>
<input type="text" name="apellido" id="apellido">
<label for="email"><strong>email</strong></label>
<input type="text" id="email">
<label for="password"><strong>Password</strong></label>
<input type="password" name="password" id="password">
<label for="comentario"><strong>Comentarios</strong></label>
<textarea name="Comentario" id="comentario" cols="30"
rows="7"></textarea>
<div>
<input type="checkbox" name="condiciones" id="condiciones"
/>
</div>
<button type="submit" onclick="registrarUser()">Enviar</button>
</fieldset>
</form>


<script>
    function registrarUser() {
        const $FORM = document.getElementById('Ej1');
        const $NAME = document.getElementById('nombre');
        const $SURNAME = document.getElementById('apellido');
        const $EMAIL = document.getElementById('email');
        const $PASSWORD = document.getElementById('password');
        const $COMMENTS = document.getElementById('comentario');
        const $ACEPTED = document.getElementById('condiciones');
        function handleSubmit(e) {
        e.preventDefault();
        const name = $NAME.value;
        const surname = $SURNAME.value;
        const email = $EMAIL.value;
        const password = $PASSWORD.value;
        const comentario = $COMMENTS.value;
        const acepted = $ACEPTED.checked;
        if (name == false || isValidName(name) == false) {
        alert('El nombre debe ser un valor válido : \n -Debe estar relleno \n -Debe estar compuesto por 1 o 2 palabras');
        }
        else {
        if (email == false || isValidEmail(email) == false) {
        alert('El email debe ser un valor válido : \n -Debe estar relleno \n -Debe estar compuesto por un @ y un ".algo"');
        }
        else {
        if (comentario == false || isValidComent(comentario) == false)
        {
        alert('El comentario tiene que tener un formato válido : \n -Debe estar relleno \n -Debe de tener un total de 50 caracteres');
        }
        else {
        if (isValidPassword(password) == false) {
        alert('El password debe tener una longitud mínima de 6 caracteres, y contener al menos una letra minúscula, una letra mayúscula y un dígito');
        }
        }
        }
        }
        var regUsuario = {nombre:name, apellido:surname, email:email,
        comentario:comentario, password:password};
        console.log(regUsuario);
        var newUser = JSON.stringify(regUsuario);
        console.log(newUser);
        }
        function isValidName(name) {
        const validacion =
        /^(([\wáéíóúÁÉÍÓÚ]+)|([\wáéíóúÁÉÍÓÚ]+\s[\wáéíóúÁÉÍÓÚ]+))$/;
        return validacion.test(name);
        }
        function isValidEmail(email) {
        const validacion = /^(.+\@.+\..+)$/;
        return validacion.test(email);
        }
        function isValidPassword(password) {
        const validacion = /^(?=\w*\d)(?=\w*[A-Z])(?=\w*[a-z])\S{6,}$/;
        return validacion.test(password);
        }
        function isValidComent(comentario) {
        const validacion = /^[\s\S]{1,50}$/;
        return validacion.test(comentario);
        }
        $FORM.addEventListener('submit', handleSubmit);
        }


</script>
</body>
</html>
